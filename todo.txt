Excellent ‚Äî you‚Äôre describing a **modern Next.js 14+ App Router setup** with **TypeScript**, **MongoDB**, and **route.ts** (the new API route convention).

Let‚Äôs build a clean **Full-Stack Todo App** following **Next.js App Router + File-based routing + MongoDB (Mongoose)**.

---

## üß± Project Overview

### üì¶ Tech Stack

* **Next.js 14+** (App Router)
* **TypeScript**
* **MongoDB** with **Mongoose**
* **File-based routing (app/** folder)**
* **API routes using `route.ts`**
* **Server Actions / Fetch for CRUD**

---

## üìÅ Folder Structure

Here‚Äôs the **recommended project structure**:

```
todo-app/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ todos/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ route.ts           # API routes (GET, POST)
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ route.ts       # API routes (PUT, DELETE)
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TodoList.tsx           # Reusable Todo list component
‚îÇ   ‚îú‚îÄ‚îÄ globals.css
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                 # Root layout
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                   # Home page (UI)
‚îÇ
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ mongodb.ts                 # MongoDB connection helper
‚îÇ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ Todo.ts                    # Mongoose schema/model
‚îÇ
‚îú‚îÄ‚îÄ .env.local                     # MongoDB connection string
‚îú‚îÄ‚îÄ next.config.mjs
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

---

## ‚öôÔ∏è 1. Create Project

```bash
npx create-next-app@latest todo-app --typescript --app
cd todo-app
npm install mongoose
```

---

## üßæ 2. MongoDB Connection (`lib/mongodb.ts`)

```ts
import mongoose from "mongoose";

const MONGODB_URI = process.env.MONGODB_URI as string;

if (!MONGODB_URI) {
  throw new Error("Please define MONGODB_URI in .env.local");
}

let isConnected = false;

export const connectToDatabase = async () => {
  if (isConnected) return;
  try {
    await mongoose.connect(MONGODB_URI);
    isConnected = true;
    console.log("‚úÖ MongoDB connected");
  } catch (err) {
    console.error("‚ùå MongoDB connection error:", err);
  }
};
```

---

## üß† 3. Todo Model (`models/Todo.ts`)

```ts
import mongoose, { Schema, models } from "mongoose";

const TodoSchema = new Schema({
  title: { type: String, required: true },
  completed: { type: Boolean, default: false },
});

const Todo = models.Todo || mongoose.model("Todo", TodoSchema);
export default Todo;
```

---

## üîå 4. API Routes (App Router style)

### `app/api/todos/route.ts`

(Handles **GET** and **POST**)

```ts
import { NextResponse } from "next/server";
import Todo from "@/models/Todo";
import { connectToDatabase } from "@/lib/mongodb";

export async function GET() {
  await connectToDatabase();
  const todos = await Todo.find();
  return NextResponse.json(todos);
}

export async function POST(request: Request) {
  await connectToDatabase();
  const data = await request.json();
  const newTodo = await Todo.create(data);
  return NextResponse.json(newTodo, { status: 201 });
}
```

---

### `app/api/todos/[id]/route.ts`

(Handles **PUT** and **DELETE**)

```ts
import { NextResponse } from "next/server";
import Todo from "@/models/Todo";
import { connectToDatabase } from "@/lib/mongodb";

export async function PUT(
  request: Request,
  { params }: { params: { id: string } }
) {
  await connectToDatabase();
  const data = await request.json();
  const updatedTodo = await Todo.findByIdAndUpdate(params.id, data, { new: true });
  return NextResponse.json(updatedTodo);
}

export async function DELETE(
  request: Request,
  { params }: { params: { id: string } }
) {
  await connectToDatabase();
  await Todo.findByIdAndDelete(params.id);
  return NextResponse.json({ message: "Deleted successfully" }, { status: 204 });
}
```

---

## üíª 5. Frontend (File-based routing)

### `app/page.tsx`

```tsx
"use client";
import { useEffect, useState } from "react";
import TodoList from "./components/TodoList";

type Todo = {
  _id?: string;
  title: string;
  completed: boolean;
};

export default function HomePage() {
  const [todos, setTodos] = useState<Todo[]>([]);
  const [newTodo, setNewTodo] = useState("");

  const fetchTodos = async () => {
    const res = await fetch("/api/todos");
    const data = await res.json();
    setTodos(data);
  };

  const addTodo = async () => {
    if (!newTodo.trim()) return;
    await fetch("/api/todos", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ title: newTodo }),
    });
    setNewTodo("");
    fetchTodos();
  };

  const toggleTodo = async (id: string, completed: boolean) => {
    await fetch(`/api/todos/${id}`, {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ completed: !completed }),
    });
    fetchTodos();
  };

  const deleteTodo = async (id: string) => {
    await fetch(`/api/todos/${id}`, { method: "DELETE" });
    fetchTodos();
  };

  useEffect(() => {
    fetchTodos();
  }, []);

  return (
    <main style={{ padding: "2rem" }}>
      <h1>üìù Full Stack Todo App</h1>
      <div style={{ marginBottom: "1rem" }}>
        <input
          value={newTodo}
          onChange={(e) => setNewTodo(e.target.value)}
          placeholder="New todo..."
        />
        <button onClick={addTodo}>Add</button>
      </div>
      <TodoList todos={todos} toggleTodo={toggleTodo} deleteTodo={deleteTodo} />
    </main>
  );
}
```

---

### `app/components/TodoList.tsx`

```tsx
type Todo = {
  _id?: string;
  title: string;
  completed: boolean;
};

interface Props {
  todos: Todo[];
  toggleTodo: (id: string, completed: boolean) => void;
  deleteTodo: (id: string) => void;
}

export default function TodoList({ todos, toggleTodo, deleteTodo }: Props) {
  if (!todos.length) return <p>No todos yet.</p>;

  return (
    <ul>
      {todos.map((todo) => (
        <li key={todo._id} style={{ marginBottom: "0.5rem" }}>
          <input
            type="checkbox"
            checked={todo.completed}
            onChange={() => toggleTodo(todo._id!, todo.completed)}
          />
          <span style={{ textDecoration: todo.completed ? "line-through" : "none" }}>
            {todo.title}
          </span>
          <button onClick={() => deleteTodo(todo._id!)} style={{ marginLeft: "1rem" }}>
            ‚ùå
          </button>
        </li>
      ))}
    </ul>
  );
}
```

---

## üîê 6. Environment Variables (`.env.local`)

```
MONGODB_URI=mongodb+srv://<username>:<password>@cluster0.mongodb.net/todos
```

---

## üöÄ 7. Run It

```bash
npm run dev
```

Then visit üëâ [http://localhost:3000](http://localhost:3000)

---

## ‚úÖ What You Get

* Clean **file-based routing** (`app/page.tsx`, `app/api/.../route.ts`)
* **Type-safe** backend and frontend
* Fully working CRUD with MongoDB
* Easy to deploy on **Vercel** (with MongoDB Atlas)

---

Would you like me to extend this version with **NextAuth.js authentication** or **server actions (no fetch calls)** next?
